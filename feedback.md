# Cloud computing (2021), University of Neuch√¢tel

Please, do not edit this file. It represents the feedback given to your group for the project.

## Part 1
| Students | Weight |
| - | - |
| Loris Witschard, Boris Mottet | 4 |


### Improvement points

- There is no version specified in your docker-compose file, so we did not manage to start the system "out of the box".
- Sending any value outside of an enum returns a 500 error. An error should be catched, and a 400 error should be raised.
- Adding a watch without an optional field is impossible (it should be possible).
- There is a limit of 100 elements returned by the DB. This is not in the specification (so we had to remove it to run our tests).
- The *find*, *list* and *update* endpoints are not protected against SQL injections
- Your authentication only protects POST, PUT, DELETE. The specification says it should also protect GET.
- In your *update* function, your assumption that the number of affected rows checks wether an element was updated or not is partially incorrect in this context. If you update an existing watch with the exact same data, you get 0 affected rows, so your API assumes the element doesn't exist, which is not true. You are giving a 404 error if you update a watch with the exact same value. (It's a tricky border case, but you may correct it by getting the watch before you do the update).

### Remarks

This is a good work, and your code is very compact. You can correct your code easily imo. Good job. 


## Part 2
| Students | Weight |
| - | - |
| Loris Witschard, Boris Mottet | 3 |


### Improvement points

- You did not code the healthchecks, so Ingress in Google Cloud cold not work out of the box at all, as it detected your services as "unhealthy". We had to add these healthchecks.
- When adding the healthchecks, we realized you used the "before request" annotation of Flask, which asks for authentication on every query. However, in order to make proper healthchecks, this security must be disabled on the / endpoint, and return a 200 HTTP status code. 
- Your deployment script does not permit to make rolling updates (with the `kubectl rollout` command).
- Your path prefix field in Ingress is not used properly. It should be : `/info/v1/*` instead of `/info/v1`. So we did not understand how you managed to deploy this config on Google Cloud.

### Remarks

Many changes were required to make it run on Google Cloud. Did you only tried in minikube? Even in minikube, the prefix field must cause problems, so I don't know.
The work on the image API is fine.
